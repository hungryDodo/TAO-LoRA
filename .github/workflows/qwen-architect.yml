name: ğŸ§  Qwen Architect
on:
  schedule:
    - cron: '0 */4 * * *' # æ¯4å°æ—¶è¿è¡Œä¸€æ¬¡
  workflow_dispatch: # æ”¯æŒæ‰‹åŠ¨è§¦å‘

jobs:
  planning:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: |
          pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118
          pip install numpy scipy triton

      - name: Architect Agent
        uses: qwenlm/qwen-code-action@v1
        with:
          qwen-token: ${{ secrets.QWEN_TOKEN }}
          model: 'qwen-2.5-coder-32b-instruct'
          task: "planning"
          prompt: |
            ä½ æ˜¯é¡¹ç›®çš„é¦–å¸­æ¶æ„å¸ˆã€‚è¯·æ‰§è¡Œä»¥ä¸‹ Speckit ç®¡ç†æµç¨‹ï¼š
            1. æ£€æŸ¥ `.specify/memory/constitution.md` ä¸­çš„é¡¹ç›®åŸåˆ™ï¼Œç¡®ä¿æ‰€æœ‰è§„åˆ’éƒ½ç¬¦åˆè¿™äº›åŸåˆ™ã€‚
            2. æ‰«æ `specs/` ç›®å½•ï¼Œè¯†åˆ«æœªå®Œæˆçš„åŠŸèƒ½è§„æ ¼ï¼ˆStatus: Draft æˆ–æœªæ ‡è®°ä¸º 'Completed' çš„åŠŸèƒ½ï¼‰ã€‚
            3. å¯¹äºæ¯ä¸ªæœªå®Œæˆçš„åŠŸèƒ½ï¼Œæ£€æŸ¥å…¶ `plan.md`ã€`spec.md`ã€`tasks.md` æ˜¯å¦å®Œæ•´ã€‚
            4. å¦‚æœå‘ç°æœ‰ `Status: Draft` çš„è§„æ ¼ï¼Œè¯·æ ¹æ®ä½ çš„æŠ€æœ¯çŸ¥è¯†è¡¥å……è¯¦ç»†çš„æŠ€æœ¯å®ç°ç»†èŠ‚ã€æ•°æ®æ¨¡å‹å’Œæµ‹è¯•è®¡åˆ’ï¼Œå¹¶æ›´æ–°çŠ¶æ€ä¸º `Ready for Implementation`ã€‚
            5. æ‰«æ Issue åˆ—è¡¨ï¼Œå¦‚æœå‘ç°æœ‰ Spec å·²ç»å‡†å¤‡å¥½ä½†æ²¡æœ‰ Issueï¼Œè¯·åˆ›å»ºä¸€ä¸ªæ–° Issueï¼Œæ‰“ä¸Šæ ‡ç­¾ `qwen-build`ã€‚
            6. ç‰¹åˆ«å…³æ³¨ TAO-LoRA é¡¹ç›®çš„æ¶æ„éœ€æ±‚ï¼šæ—¶é—´æ„ŸçŸ¥é‡åŒ–ã€åŠ¨æ€è·¯å¾„è·¯ç”±ã€ç¡¬ä»¶ä¼˜åŒ–å’Œäº‹ä»¶ä¿ç•™æœºåˆ¶ã€‚
